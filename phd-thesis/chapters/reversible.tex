%!TEX root = /Users/gilesb/UofC/thesis/phd-thesis/phd-thesis.tex

\chapter{Reversible computation}\label{chap:reversible_computation}

Bennet, in \cite{bennett:1973reverse}, showed that it was possible to
emulate a standard Turing machine via a reversible Turing machine and
vice-versa. This showed the equivalence of  standard and reversible
Turing machines. We reproduce the essence of this proof below.

\section{Reversible Turing machines} % (fold)
\label{sec:reversible_turing_machines}

Turing machines consist of a tape, a read-write head positioned over
the tape, a machine state and a set of instructions. The set of instructions
may be given as a set of transitions determining the movement of the
read-write head, what it writes and the resulting state of the machine.

\begin{definition}\label{def:standard_tape}
  Given an alphabet $A$ which does not contain a space, a tape is in \emph{standard
  format} when:
  \begin{enumerate}
    \item The tape head is positioned directly over a blank space;
    \item The spaces to the left (the $+1$ direction) contain only
    elements of $A$.
    \item All other spaces of the tape are blank.
  \end{enumerate}
\end{definition}

\begin{definition}\label{def:turing_quintuple}
  A \emph{turing quintuple} is a quintuple $(s,\alpha,\alpha',\delta,s')$ where:
  \begin{enumerate}
    \item $s,s' \in S$, where $S$ is a predefined set of states;
    \item $\alpha, \alpha'\in A$ is predefined set of glyphs;
    \item $\delta \in \{-1,0,1\}$.
  \end{enumerate}
\end{definition}

\begin{definition}
  A \emph{standard turing quintuple set} $Q$ consists of a set of turing quintuples
  such that:
  \begin{enumerate}
    \item If $q_1 = (s_1,\alpha_1,\alpha'_1,\delta_1,s'_1)$ and
      $q_2 = (s_2,\alpha_2,\alpha'_2,\delta_2,s'_2)$ are in $Q$, then either
      $s_1 \ne s_2$ or $\alpha_1\ne \alpha_2$ or both are not equal.
    \item There are two special  quintuples contained in $Q$:
      \begin{enumerate}
        \item $(s_1,\_,\_,+1,s_2)$\footnote{Here, $\_$ is used to signify a blank.},
          the \emph{start quintuple};
        \item $(s_{t-1}, \_, \_, 0, s_{t})$, the \emph{end quintuple} where
        $t$ is the number of states and is the final state of the machine.
      \end{enumerate}
  \end{enumerate}
\end{definition}

\begin{definition}\label{def:turing_machine}
  A \emph{standard Turing machine} is given by
  \begin{itemize}
    \item a standard turing quintuple set;
    \item a tape that starts in standard format;
    \item and the condition that   and if the machine halts, it will halt in state
      $s_t$, the final state of the end quintuple and the output will be in standard format.
  \end{itemize}
\end{definition}

The turing quintuples may also be regarded as giving the data for a partial
function in \sets: $\tau:S\times A \to A\times\{-1,0,1\}\times S$.
\begin{remark}
  A multi-tape Turing machine with $n$ tapes and read-write heads
  can be described by modifying
  definition \vref{def:turing_machine} such that $\alpha$ is an $n$-tuple
  of the set of glyphs for the Turing machine and $\delta$ is an
  $n$-tuple of movement directions.
\end{remark}

\begin{example}\label{exa:simple_turing_program}
  Suppose $S=\{start,run,reset,done\}$, $A=\{0,1,\_\}$ and the Turing machine
  program is given by the quintuples
  \begin{align*}
    &(start,\_,\_,+1,run),\\
    &(run,0,1,+1,run), (run,1,0,+1,run),\\
    &(run,\_,\_,-1,reset),\\
    &(reset,0,0,-1,reset),(reset,1,1,-1,reset),\\
    &(reset,\_,\_,0,done).
  \end{align*}
  This program will perform a ``bit-flip'' of all $0$s and $1$s on the tape
  until it reads a space, reposition the read head to the standard format
  and then it will halt.
\end{example}

As can be seen from example \vref{exa:simple_turing_program}, it is \emph{possible}
that a Turing machine program is reversible. If we had chosen the second
quintuple to be $(run,0,0,+1,run)$ instead, the program would not have been
reversible.

The essential property that a Turing machine program needs to be reversible
is that the function $\tau$ defined from the quintuples is injective. In order
to simplify the discovery the function being injective, we reformulate the
turing quintuples as quadruples.

\begin{definition}\label{def:turing_quadruple}
  A \emph{turing quadruple} is given by a quadruple
  \[(s,[b_1,b_2,\ldots,b_n],[b'_1,b'_2,\ldots,b'_n],s')\]
  such that:
  \begin{itemize}
    \item $s,s'\in S$, some set of states;
    \item $b_\jay\in A  \cup \{\phi\}$ where $A$ is some alphabet;
    \item $b'_\jay\in A  + \{-1,0,1\}$ ;
    \item $b'_\jay \in \{-1,0,1\}$ if and only if $b_\jay = \phi$.
  \end{itemize}
  In this definition, $b_\jay = \phi$ means that the value of tape
  \jay is ignored.
\end{definition}

A turing quadruple explicitly splits the read/write action of the
Turing machine away from the movement. In a particular step for
tape $k$, the
turing machine will either read and write an item or it will not
read and then move.

\begin{remark}\label{rem:quintuple_to_quadruple}
  Any turing quintuple may be split into two
  turing quadruples by the addition of a new state $a''$ in $A$, where the
  first quadruple will consist of all the read-write operations and
  leave the Turing machine in state $a''$. The second quadruple will start
  in state $a''$ and all the $b_\jay$ will be $\phi$, with $b'_\jay$ being
  movements on each of the $n$ tapes.
\end{remark}

\begin{definition}\label{def:reversible_turing_quadruple}
  A set of turing quadruples $Q$ is called \emph{reversible set of turing
  quadruples} when given $q_1,q_2\in Q$, with $q_1=(a,[b_\jay], [b'_\jay], a')$ and
  $q_2=(c,[d_\jay], [d'_\jay], c')$:
\begin{itemize}
  \item  if $a=c$, then there is a \kay where $b_\kay, d_\kay \in A$ and
    $b_\kay \ne d_\kay$;
  \item if $a' = c'$, then there is a \jay with $b'_\jay, d'_\jay \in A$ and
    $b'_\jay \ne d'_\jay$.
\end{itemize}
\end{definition}

Similarly to turing quintuples, turing quadruples may be taken as the
data for a function in \sets:
\[\rho:S\times(A  \cup \{\phi\}) \to (A  + \{-1,0,1\}) \times S.\]
We can see by inspection that $\rho$ is a reversible partial function when
the set of turing quadruples that give $\rho$ is a reversible set of turing
quadruples.

\begin{definition}\label{def:reversible_turing_machine}
  A \emph{reversible Turing machine} is one that is described by a
  set of reversible turing quadruples.
\end{definition}

We will show that a reversible Turing machine with three tapes can emulate
a Turing machine.

\begin{theorem}[Bennet\cite{bennett:1973reverse}]\label{thm:reversible_turing_machine_emulates_standard}
  Given a standard Turing Machine $M$, it may be emulated by a three tape reversible
  Turing machine $R$. In this case, emulated means:
  \begin{itemize}
    \item $M$ halts on standard input $I$ if and only if $R$ halts on standard input $(I,\_,\_)$.
    \item $M$ halts on standard input $I$ producint standard output $O$,
      if and only if $R$ halts on input ($I,\_,\_$) producing standard output $(I,\_,O)$.
  \end{itemize}
\end{theorem}
\begin{proof}
  (Sketch only).

  The crux of the proof is to convert the quintuples of $M$ to the quadruples of
  $R$ as noted in remark \vref{rem:quintuple_to_quadruple}. Explicitly for a single
	tape machine, we have
  \begin{align}
    (s,a,a,\delta,s') \mapsto \left((s,a,a',s''),
          (s'',\phi,\delta,s')\right).\label{eq:quint_to_quad}
  \end{align}
	
	In Equation~\eqref{eq:quint_to_quad}, $s''$ is a new state for the machine $M$, 
	not in the current set of states.

  Assign an order to the $n$ quintuples of $M$, where the start
  quintuple is the first in the order and the end quintuple comes last. Convert these to
	quadruples as in Equation~\eqref{eq:quint_to_quad}. 
	
	We then proceed to create three groups of quadruples for $R$.
  We call these \emph{emulation, copy,} and \emph{restore}.

  To create the emulation phase quadruples, we examine the pairs of quadruples of $M$
	in the sorted order and produce a pair of quadruples for $R$.
  \begin{align*}
    \text{Pair 1}\quad (s_1,\_,\_,s_1'') & \mapsto (s_1,[\_,\phi,\_],[\_,+1,\_],e_1)\\
    (s_1'',\phi,\delta,s_2) & \mapsto
          (e_1,[\phi,\_,\phi],[\delta,1,0],s_2)\\
					& \vdots \\
    \text{Pair \jay}\quad  (s_\kay,a_\jay,a'_\jay,s''_\kay) & 
					\mapsto (s_\kay,[a_\jay,\phi,\_],[a'_\jay,+1,\_],e_\jay)\\
     (s_\kay'',\phi,\delta,s_i) & \mapsto
          (e_\jay,[\phi,\_,\phi],[\delta_\jay,\jay,0],s_i)\\
					& \vdots \\
    \text{Pair }n \quad (s_\ell,\_,\_,s_\ell'') & \mapsto (s_\ell,[\_,\phi,\_],[\_,+1,\_],e_n)\\
     (s_\ell'',\phi,0,s_f) & \mapsto
          (e_n,[\phi,\_,\phi],[0,n,0],s_f).
  \end{align*}
  By inspection, one can see that even if the quadruples of $M$ were not a reversible set, the
	set created for $R$ is a reversible set, due to the writing of the quadruple index on tape 2.
	Upon completion of the emulation phase, tape 1 will be the same as $M$ would have produced on
	its single tape, tape 2 will be $[1,2,\dots,n]$ and tape 3 will be blanks.
	
	For the copy phase, we create the following quadruples:
	\begin{align*}
		(s_f,[\_,n,\_],&[\_,n,\_],c_1 )\\
		(c_1,[\phi,\phi,\phi],&[+1,0,+1],c'_1 )\\
		(c'_1,[x,n,\_],&[x,n,x],c_1 )\quad \text{when } x \ne \_\\
		(c'_1,[\_,n,\_],&[\_,n,x],c_2 )\\
		(c_2,[\phi,\phi,\phi],&[-1,0,-1],c'_2 )\\
		(c'_2,[x,n,x],&[x,n,x],c_2 )\quad \text{when }x \ne \_\\
		(c'_2,[\_,n,_],&[\_,n,\_],r_\ell).
	\end{align*}

  At the completion of this phase, tapes 1 and 2 will be unchanged and tape 3 will be a copy
	of tape 1. 
	
	Finally we perform the restore phase where the history will be erased and tape 1 reset to
	the input. The quadruples that will accomplish this are:
	\begin{align*}
	    \text{Pair }n \quad (r_n,[\phi,n,\phi],&[0,\_,0],r'_n)\\
			(r'_n,[\_,\phi,\_],&[\_,-1,\_],r_{n-1})\\
			&\vdots\\
	    \text{Pair }\jay \quad (r_\kay,[\phi,\jay,\phi],&[-\delta_\jay,\_,0],r'_\jay)\\
			(r'_\jay,[a'_\jay,\phi,\_],&[a_\jay,-1,\_],r_i)\\
			&\vdots\\
			\text{Pair 1} \quad (r_2,[\phi,1,\phi],&[-1,\_,0],r'_1)\\
			(r'_1,[\_,\phi,\_],&[\_,-1,\_],r_1).
	\end{align*}
	In this restore phase, the indexes of the states $r$ match up to the indexes of states $s$. The
	quadruples reverse the actions of the emulate phase on tape 1, erase the history on tape 2 and
	make no change to tape 3.

\end{proof}


% section reversible_turing_machines (end)