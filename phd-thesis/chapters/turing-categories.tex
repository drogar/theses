%!TEX root = /Users/gilesb/UofC/thesis/phd-thesis/phd-thesis.tex
\chapter{Turing Categories and PCAs} % (fold)
\label{chap:turing_categories}

In this chapter, we review the definition and properties of a Turing
category\cite{cockett-hostra08-intro-to-turing} and Partial Combinatory Algebras. We show what
structures are needed in a discrete inverse category \X so that the constructed category, \Xt, is a
Turing category or has a PCA.

\section{Turing Categories}
\label{sec:turing_category_definitions}


\begin{definition}[Turing category]\label{def:turing_category}
  Given \X is a cartesian restriction category:
  \begin{enumerate}
    \item For a map $\txy: A \times X \to Y$, a map $f:B\times X \to Y$ \emph{admits a $\txy$-index}
      when there is a total $\code{f}:B\to A$ such that
      \[
        \xymatrix@C+10pt@R+10pt{
          A\times X \ar[r]^{\txy} & Y \\
          B\times X \ar@{.>}[u]^{\code{f}\times 1_X} \ar[ur]_f
        }
      \]
      commutes.\label{defitem:turing_admit_txy_index}
    \item A map $\txy: A \times X \to Y$ is called a \emph{universal application} if all
      $f:B\times X \to Y$ admit a $\txy$-index.\label{defitem:turing_universal_application}
    \item If $A$ is an object in $\X$ such that for every pair of objects $X,Y$ in \X there is
      a universal application, then $A$ is called a \emph{Turing object}.
    \item A cartesian restriction category that contains a Turing object is called a
      \emph{Turing category}.
  \end{enumerate}
\end{definition}

Note there is no requirement in the definition for the map $\code{f}$ to be unique. When $\code{f}$ is unique
for a specific $\txy$, then that $\txy$ is called \emph{extensional}. In the case where the object
$B$ is the terminal object, then the map $\code{f}$ is a point of $A$ (with $f = (\code{f} \times 1)\txy$) and
$\code{f}$ is referred to as a \emph{code} of $f$.

\begin{definition}\label{def:turing_structure}
  Given $\T$ is a Turing category and $A$ is an object of \T,
  \begin{enumerate}
    \item If $\Upsilon=\{\txy: A\times X \to Y | X,Y \in ob(\T)\}$, then $\Upsilon$ is called an
      \emph{applicative family} for $A$.
    \item An applicative family $\Upsilon$ is called \emph{universal for $A$} when each $\txy$ is
      a universal application. This is also referred to as a \emph{Turing structure} on $A$.
    \item A pair $(A,\Upsilon)$ where $\Upsilon$ is universal for $A$ is called a \emph{Turing
      structure} on \T.
  \end{enumerate}
\end{definition}

\begin{lemma}\label{lem:turing_object_is_retractable}
  If \T is a Turing category with Turing object $T$, then every object $B$ in \T is a retract of
  $T$.
\end{lemma}
\begin{proof}
  As $T$ is a Turing object, we have a diagram for $\tur{1}{B}$ and $\pi_0:B\times 1 \to B$:
  \[
    \xymatrix@C+10pt@R+10pt{
      T\times 1 \ar[r]^{\tur{1}{B}} & B \\
      B\times 1. \ar@{.>}[u]^{\code{\pi_0}\times 1_1} \ar[ur]_{\pi_0}
    }
  \]
  Note we also have $u_r:B\to B\times 1$ is an
  isomorphism and therefore we have $1_X = u_r \pi_0 = (u_r (\code{\pi_0}\times 1)) \tur{1}{X}$. Hence, we
  have $((u_r (\code{\pi_0}\times 1)), \tur{1}{X}):B \retract T$.
\end{proof}

This allows us to move to the various recognition criteria for Turing categories.

\begin{theorem}\label{thm:turing_recognition}
  A Cartesian restriction category \D is a Turing category if and only if $\T$ has an object $T$
  which every other object of \D is a retract and $T$ has a universal self-application map
  $\bullet$, written as $T\times T \xrightarrow{\ \bullet\ }T$.
\end{theorem}
\begin{proof}
  The ``only if'' portion follows immediately from setting $T$ to be the Turing object of $\D$ and
  $\bullet = \tur{T}{T}$.

  For the ``if'' direction, we need to construct the family of universal applications
  $\txy : T\times X \to Y$ for each pair of objects $X,Y$ in \D.

  Let us choose pairs of maps that witness the retractions of $X, Y$ of $T$, that is:
  \[
    (m_X,r_X):X \retract T \quad\text{and}\quad(m_Y,r_Y):Y \retract T.
  \]
  Define $\txy = (1_T\times m_X ) \bullet r_Y$. Suppose we are given $f:B\times X \to Y$. Consider
  \[
    \xymatrix@C+10pt@R+10pt{
      T \times X \ar[r]^{1_T\times m_X} & T\times T \ar[r]^{\bullet} & T \ar[r]^{r_Y} & Y \\
      B \times X \ar[r]^{1_B\times m_X} \ar[u]^{h\times 1_X}
        & B \times T \ar@{.>}[u]^{h\times 1_T} \ar[r]^{1_B \times r_X}
        & B \times X \ar[ur]^{f} \ar[u]^{f m_Y}
      }
  \]
  where $h$ is the index for the composite map $(1_B \times r_X) f m_Y$. The middle square commutes
  as $\bullet$ is a universal application for $T,T$. The right triangle commutes as $m_Y r_Y =1$.
  The left square commutes as each composite is $h \times m_X$. Noting that the bottom path from
  $B\times X$ to $Y$ is $(1_B \times m_X)(1_B \times r_X)f = f$ and the top path from $T\times X$ to
  $Y$ is our definition of $\txy$, this means $f$ admits the $\txy$-index $h$.
\end{proof}

Note that different splittings (choices of $(m,r)$ pairs) would lead to different $\txy$ maps. In
fact there is no requirement that this is the only way to create a universal applicative family
for $T$.

There is one remaining set of criteria that also give us a Turing category:

\begin{lemma}\label{lem:t_t_to_t_gives_a_turing_category}
  A Cartesian restriction category \T is a Turing category if:
  \begin{enumerate}[{(}i{)}]
  \item $\T$ has an object $T$ which every other object of \D is a retract;
  \item $T\times T$ has a map  $\circ$, written as $T\times T \xrightarrow{\ \circ\ }T$ and for all
    $f:T\to T$ there exists a map, $\name{f}$ with  $\rst{\name{f}} = 1$ such that
      \[
        \xymatrix{
          T\times T \ar[r]^{\circ} & T \\
          T \ar[ur]_{f} \ar[u]^{\<\name{f},1\>}
        }
      \]
    is a commutative diagram.
  \end{enumerate}
\end{lemma}
\begin{proof}
  See ?
\end{proof}
\section{Turing inverse categories}
\label{sec:turing_inverse_categories}
Now, we define Turing inverse categories. Essentially, a Turing inverse category is a discrete
inverse category \X where $\Xt$ is a Turing category. However, we wish to give a more concrete
definition of this.

\begin{definition}\label{def:turing_inverse_category}
  A discrete inverse category \X is a \emph{Turing inverse category} when there is an object $T$ in
  \X with a map $\diamond :T\*T \to T\*T$ such that for every map $f:T \to T\*T$ there is a total map
  $\icode{f}: T\to T$ such that $f \xequiv{k} \Delta(\icode{f}\*1)\diamond$, i.e., the diagram
  \[
    \xymatrix @C=20pt @R=20pt{
      T\*T \ar[rr]^{\diamond} & & T \* T \ar@{.>}[dr]^{\Delta\* 1}\\
      & & & T \* (T\* T) \ar@{.>}[dd]^{1\*k}\\
      T \ar[uu]^{\Delta(\icode{f}\*1)} \ar[ddrr]_{f} \\
      & & & T \* T\*T \ar@{.>}[dl]^(.4){\inv{\Delta}\* 1}\\
      && T\*T
    }
  \]
  commutes for some $k$.
\end{definition}

\begin{lemma}\label{lem:turing_inverse_category_gives_a_turing_category}
  When $\X$ is a Turing inverse category, $\Xt$ is a Turing category.
\end{lemma}
\begin{proof}
  We must show that $T$ is a universal object in $\Xt$ (i.e., everything is a retract of $T$ and
  that the diagram of Lemma~\ref{lem:t_t_to_t_gives_a_turing_category} is satisfied.

  We note that the diagram of Definition~\ref{def:turing_inverse_category}, when raised to $\Xt$
  translates to:
  \[
    \xymatrix@C+25pt@R+10pt{
      T \times T \ar[r]^{(\diamond, T)} &T \\
      T \ar[u]^{\<\icode{f},1\>} \ar[ur]_{(f, T)}
    }
  \]

\end{proof}

\section{Partial combinatory algebras}
\label{sec:partial_combinatory_algebras}

\begin{definition}\label{def:multi-self-map}
  In a Cartesian restriction category, for any map $f:A\times A\to A$ define $\multiapp{f}{n}$
  recursively by:
  \begin{enumerate}[{(}i{)}]
  \item $\multiapp{f}{1} = f$
  \item $\multiapp{f}{n+1} = (f\times 1) \multiapp{f}{n}$
  \end{enumerate}
\end{definition}
\begin{definition}\label{def:partial_combinatory_algebra}
  A Cartesian restriction category has a \emph{partial combinatory algebra} when it has an object
  $A$ together with:
  \begin{enumerate}[{(}i{)}]
  \item A partial map $\bullet:A\times A \to A$,
  \item two total elements $1\xrightarrow{k}A$ and $1\xrightarrow{s}{A}$ which satisfy
    \[
      \xymatrix@C+25pt{
        A\times A\times A \ar[r]^(.6){(\bullet\times 1)\bullet} & A\\
        A\times A \ar[u]^{k\times1\times1} \ar[ur]_{\pi_1}
      }\quad
      \xymatrix{
        A\times A\times A\times A \ar[r]^(.6){\multibullet{3}}&A\\
        &A\times A \ar[u]_{\bullet}\\
        A\times A\times A \ar[uu]^{s\times1\times1\times1} \ar[r]_(.4){\theta_A'}
          & (A\times A) \times (A\times A) \ar[u]_{\bullet\times\bullet}
      }
    \]
    and $A\times A \xrightarrow{s\times1\times1} A\times A\times A \xrightarrow{\bullet^2} A$ is total.
  \end{enumerate}
  In the above $\theta' = (1\times1\times\Delta)(1\times c \times 1)a$ where $a$ sets the
  parenthesis as in the diagram.
\end{definition}

Of course, this is more familiarly given equationally:
\[
   (k\bullet x)\bullet y = x \qquad ((s\bullet x)\bullet y) \bullet z = (x\bullet z) \bullet
   (y\bullet z)
\]
which are the equations of a combinatory algebra where partiality is not considered. As we have
partiality, we want to consider when maps are total, thus we add the requirement that
$s\bullet x\bullet y$ is a
total map for any $x,y$.

Note that if we have a Turing object $T$ in a Cartesian restriction category, it is a partial
combinatory algebra. All we need to do is to actually define the element $k$ and $s$ by using the
commuting diagrams of Definition~\ref{def:partial_combinatory_algebra}.

Now, we want to consider what are the conditions required for an inverse category \X such that $\Xt$
has a partial combinatory algebra.

\begin{definition}\label{def:inverse_partial_combinatory_algebra}
  A discrete inverse category \X has a \emph{partial combinatory pre-algebra} when there is an
  object $A$ in \X with the following:
  \begin{enumerate}[{(}i{)}]
  \item A partial map $A\*A \xrightarrow{\bullet} A\*A$;
  \item two total elements two total elements $1\xrightarrow{k}A$ and $1\xrightarrow{s}{A}$ and maps
    $h_k:A\*A\*A\to A\*A, h_s:A\*A\*A\*A\to A\*A\*A\*A$ which satisfy
    \[
      \xymatrix@C+25pt{
         & A\*(A\*A) \ar[dr]^{\Delta\*1}\\
        A\* A\* A \ar[ur]^{(\bullet\* 1)(1\*c_\*)(1\*\bullet)} & & A\*A\*A\*A\ar[d]^{1\*h_k}\\
        A\* A \ar[u]^{\inv{\usl}(k\*1\*1)} \ar[dr]_{1} & & A\*A\*A \ar[dl]^{\inv{\Delta}\*1}\\
        & A\*A &
      }
    \]
    i.e. $\inv{\usl}{k\*1\*1}(\bullet\* 1)(1\*c_\*)(1\*\bullet) \xequiv{h_k}1$ and
    \[
      \xymatrix{
        & A\* A\* A\* A \ar[dr]^{\Delta\*1} \\
        A\* A\* A\* A
          \ar[ur]|{\bullet\*1(1\*c\*1)(1\*c)\bullet\*1(1\*c\*1)(\bullet\*1)}&
           & A\* A\* A\* A\* A \ar[d]^{1\*h_s}\\
        A\* A\* A \ar[u]^{\inv{\usl}(s\*1)} \ar[d]_(.4){\theta_A'}
           & &A\*A\*A\*A\*A \ar[d]^{\inv{\Delta}\*1}\\
        (A\* A) \* (A\* A) \ar[dr]_{\bullet\*\bullet(1\*c\*1)} &&A\*A\*A\*A \\
         &(A\* A)\* A\* A \ar[ur]_{\bullet\*1}
      }
    \]
    i.e.,
    \begin{multline*}
      \inv{\usl}(s\*1)\bullet\*1(1\*c\*1)(1\*c)\bullet\*1(1\*c\*1)(\bullet\*1) \xequiv{h_s} \\
      \theta_A'(\bullet\*\bullet(1\*c\*1))(\bullet\*1)
    \end{multline*}
    and $A\* A \xrightarrow{s\*1\*1} A\* A\* A \xrightarrow{(\bullet\* 1)(1\*c_\*)(\bullet\*1)} A$ is total.
  \end{enumerate}
\end{definition}



% chapter turing_categories (end)

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../phd-thesis"
%%% End:
